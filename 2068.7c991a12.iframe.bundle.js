"use strict";(self.webpackChunkui_kit=self.webpackChunkui_kit||[]).push([[2068],{"./node_modules/@angular/cdk/fesm2022/coercion.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Mt:()=>coerceArray,W6:()=>coerceBooleanProperty,mk:()=>coerceElement,ph:()=>coerceCssPixelValue,wZ:()=>coerceNumberProperty});var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs");function coerceBooleanProperty(value){return null!=value&&"false"!=`${value}`}function coerceNumberProperty(value,fallbackValue=0){return function _isNumberValue(value){return!isNaN(parseFloat(value))&&!isNaN(Number(value))}(value)?Number(value):fallbackValue}function coerceArray(value){return Array.isArray(value)?value:[value]}function coerceCssPixelValue(value){return null==value?"":"string"==typeof value?value:`${value}px`}function coerceElement(elementOrRef){return elementOrRef instanceof _angular_core__WEBPACK_IMPORTED_MODULE_0__.ElementRef?elementOrRef.nativeElement:elementOrRef}},"./node_modules/lodash-es/isNil.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{c:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=function isNil(value){return null==value}},"./node_modules/lodash-es/isString.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{c:()=>__WEBPACK_DEFAULT_EXPORT__});var _baseGetTag_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/lodash-es/_baseGetTag.js"),_isArray_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/lodash-es/isArray.js"),_isObjectLike_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/lodash-es/isObjectLike.js");const __WEBPACK_DEFAULT_EXPORT__=function isString(value){return"string"==typeof value||!(0,_isArray_js__WEBPACK_IMPORTED_MODULE_0__.c)(value)&&(0,_isObjectLike_js__WEBPACK_IMPORTED_MODULE_1__.c)(value)&&"[object String]"==(0,_baseGetTag_js__WEBPACK_IMPORTED_MODULE_2__.c)(value)}},"./node_modules/ngx-mask/fesm2022/ngx-mask.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{OS:()=>provideNgxMask,ay:()=>NgxMaskPipe,eC:()=>NgxMaskDirective});var C_Users_SPHANDA_Desktop_ui_kit_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),_angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),_angular_common__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@angular/common/fesm2022/common.mjs"),_angular_forms__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@angular/forms/fesm2022/forms.mjs");const NGX_MASK_CONFIG=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.InjectionToken("ngx-mask config"),NEW_CONFIG=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.InjectionToken("new ngx-mask config"),INITIAL_CONFIG=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.InjectionToken("initial ngx-mask config"),initialConfig={suffix:"",prefix:"",thousandSeparator:" ",decimalMarker:[".",","],clearIfNotMatch:!1,showTemplate:!1,showMaskTyped:!1,placeHolderCharacter:"_",dropSpecialCharacters:!0,hiddenInput:void 0,shownMaskExpression:"",separatorLimit:"",allowNegativeNumbers:!1,validation:!0,specialCharacters:["-","/","(",")",".",":"," ","+",",","@","[","]",'"',"'"],leadZeroDateTime:!1,apm:!1,leadZero:!1,keepCharacterPositions:!1,triggerOnMaskChange:!1,inputTransformFn:value=>value,outputTransformFn:value=>value,maskFilled:new _angular_core__WEBPACK_IMPORTED_MODULE_0__.EventEmitter,patterns:{0:{pattern:new RegExp("\\d")},9:{pattern:new RegExp("\\d"),optional:!0},X:{pattern:new RegExp("\\d"),symbol:"*"},A:{pattern:new RegExp("[a-zA-Z0-9]")},S:{pattern:new RegExp("[a-zA-Z]")},U:{pattern:new RegExp("[A-Z]")},L:{pattern:new RegExp("[a-z]")},d:{pattern:new RegExp("\\d")},m:{pattern:new RegExp("\\d")},M:{pattern:new RegExp("\\d")},H:{pattern:new RegExp("\\d")},h:{pattern:new RegExp("\\d")},s:{pattern:new RegExp("\\d")}}},timeMasks=["Hh:m0:s0","Hh:m0","m0:s0"],withoutValidation=["percent","Hh","s0","m0","separator","d0/M0/0000","d0/M0","d0","M0"];class NgxMaskApplierService{constructor(){this._config=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.inject)(NGX_MASK_CONFIG),this.dropSpecialCharacters=this._config.dropSpecialCharacters,this.hiddenInput=this._config.hiddenInput,this.clearIfNotMatch=this._config.clearIfNotMatch,this.specialCharacters=this._config.specialCharacters,this.patterns=this._config.patterns,this.prefix=this._config.prefix,this.suffix=this._config.suffix,this.thousandSeparator=this._config.thousandSeparator,this.decimalMarker=this._config.decimalMarker,this.showMaskTyped=this._config.showMaskTyped,this.placeHolderCharacter=this._config.placeHolderCharacter,this.validation=this._config.validation,this.separatorLimit=this._config.separatorLimit,this.allowNegativeNumbers=this._config.allowNegativeNumbers,this.leadZeroDateTime=this._config.leadZeroDateTime,this.leadZero=this._config.leadZero,this.apm=this._config.apm,this.inputTransformFn=this._config.inputTransformFn,this.outputTransformFn=this._config.outputTransformFn,this.keepCharacterPositions=this._config.keepCharacterPositions,this._shift=new Set,this.plusOnePosition=!1,this.maskExpression="",this.actualValue="",this.showKeepCharacterExp="",this.shownMaskExpression="",this.deletedSpecialCharacter=!1,this._formatWithSeparators=(str,thousandSeparatorChar,decimalChars,precision)=>{let x=[],decimalChar="";if(Array.isArray(decimalChars)){const regExp=new RegExp(decimalChars.map((v=>"[\\^$.|?*+()".indexOf(v)>=0?`\\${v}`:v)).join("|"));x=str.split(regExp),decimalChar=str.match(regExp)?.[0]??""}else x=str.split(decimalChars),decimalChar=decimalChars;const decimals=x.length>1?`${decimalChar}${x[1]}`:"";let res=x[0]??"";const separatorLimit=this.separatorLimit.replace(/\s/g,"");separatorLimit&&+separatorLimit&&(res="-"===res[0]?`-${res.slice(1,res.length).slice(0,separatorLimit.length)}`:res.slice(0,separatorLimit.length));const rgx=/(\d+)(\d{3})/;for(;thousandSeparatorChar&&rgx.test(res);)res=res.replace(rgx,"$1"+thousandSeparatorChar+"$2");return void 0===precision?res+decimals:0===precision?res:res+decimals.substring(0,precision+1)},this.percentage=str=>{const sanitizedStr=str.replace(",","."),value=Number(this.allowNegativeNumbers&&str.includes("-")?sanitizedStr.slice(1,str.length):sanitizedStr);return!isNaN(value)&&value>=0&&value<=100},this.getPrecision=maskExpression=>{const x=maskExpression.split(".");return x.length>1?Number(x[x.length-1]):1/0},this.checkAndRemoveSuffix=inputValue=>{for(let i=this.suffix?.length-1;i>=0;i--){const substr=this.suffix.substring(i,this.suffix?.length);if(inputValue.includes(substr)&&i!==this.suffix?.length-1&&(i-1<0||!inputValue.includes(this.suffix.substring(i-1,this.suffix?.length))))return inputValue.replace(substr,"")}return inputValue},this.checkInputPrecision=(inputValue,precision,decimalMarker)=>{if(precision<1/0){if(Array.isArray(decimalMarker)){const marker=decimalMarker.find((dm=>dm!==this.thousandSeparator));decimalMarker=marker||decimalMarker[0]}const precisionRegEx=new RegExp(this._charToRegExpExpression(decimalMarker)+`\\d{${precision}}.*$`),precisionMatch=inputValue.match(precisionRegEx),precisionMatchLength=(precisionMatch&&precisionMatch[0]?.length)??0;if(precisionMatchLength-1>precision){const diff=precisionMatchLength-1-precision;inputValue=inputValue.substring(0,inputValue.length-diff)}0===precision&&this._compareOrIncludes(inputValue[inputValue.length-1],decimalMarker,this.thousandSeparator)&&(inputValue=inputValue.substring(0,inputValue.length-1))}return inputValue}}applyMaskWithPattern(inputValue,maskAndPattern){const[mask,customPattern]=maskAndPattern;return this.customPattern=customPattern,this.applyMask(inputValue,mask)}applyMask(inputValue,maskExpression,position=0,justPasted=!1,backspaced=!1,cb=(()=>{})){if(!maskExpression||"string"!=typeof inputValue)return"";let cursor=0,result="",multi=!1,backspaceShift=!1,shift=1,stepBack=!1;inputValue.slice(0,this.prefix.length)===this.prefix&&(inputValue=inputValue.slice(this.prefix.length,inputValue.length)),this.suffix&&inputValue?.length>0&&(inputValue=this.checkAndRemoveSuffix(inputValue)),"("===inputValue&&this.prefix&&(inputValue="");const inputArray=inputValue.toString().split("");if(this.allowNegativeNumbers&&"-"===inputValue.slice(cursor,cursor+1)&&(result+=inputValue.slice(cursor,cursor+1)),"IP"===maskExpression){const valuesIP=inputValue.split(".");this.ipError=this._validIP(valuesIP),maskExpression="099.099.099.099"}const arr=[];for(let i=0;i<inputValue.length;i++)inputValue[i]?.match("\\d")&&arr.push(inputValue[i]??"");if("CPF_CNPJ"===maskExpression&&(this.cpfCnpjError=11!==arr.length&&14!==arr.length,maskExpression=arr.length>11?"00.000.000/0000-00":"000.000.000-00"),maskExpression.startsWith("percent")){if(inputValue.match("[a-z]|[A-Z]")||inputValue.match(/[-!$%^&*()_+|~=`{}\[\]:";'<>?,\/.]/)&&!backspaced){inputValue=this._stripToDecimal(inputValue);const precision=this.getPrecision(maskExpression);inputValue=this.checkInputPrecision(inputValue,precision,this.decimalMarker)}const decimalMarker="string"==typeof this.decimalMarker?this.decimalMarker:".";if(inputValue.indexOf(decimalMarker)>0&&!this.percentage(inputValue.substring(0,inputValue.indexOf(decimalMarker)))){let base=inputValue.substring(0,inputValue.indexOf(decimalMarker)-1);this.allowNegativeNumbers&&"-"===inputValue.slice(cursor,cursor+1)&&!backspaced&&(base=inputValue.substring(0,inputValue.indexOf(decimalMarker))),inputValue=`${base}${inputValue.substring(inputValue.indexOf(decimalMarker),inputValue.length)}`}let value="";value=this.allowNegativeNumbers&&"-"===inputValue.slice(cursor,cursor+1)?`-${inputValue.slice(cursor+1,cursor+inputValue.length)}`:inputValue,result=this.percentage(value)?this._splitPercentZero(inputValue):this._splitPercentZero(inputValue.substring(0,inputValue.length-1))}else if(maskExpression.startsWith("separator")){(inputValue.match("[wа-яА-Я]")||inputValue.match("[ЁёА-я]")||inputValue.match("[a-z]|[A-Z]")||inputValue.match(/[-@#!$%\\^&*()_£¬'+|~=`{}\]:";<>.?/]/)||inputValue.match("[^A-Za-z0-9,]"))&&(inputValue=this._stripToDecimal(inputValue));const precision=this.getPrecision(maskExpression),decimalMarker=Array.isArray(this.decimalMarker)?".":this.decimalMarker;0===precision?inputValue=this.allowNegativeNumbers?inputValue.length>2&&"-"===inputValue[0]&&"0"===inputValue[1]&&inputValue[2]!==this.thousandSeparator&&","!==inputValue[2]&&"."!==inputValue[2]?"-"+inputValue.slice(2,inputValue.length):"0"===inputValue[0]&&inputValue.length>1&&inputValue[1]!==this.thousandSeparator&&","!==inputValue[1]&&"."!==inputValue[1]?inputValue.slice(1,inputValue.length):inputValue:inputValue.length>1&&"0"===inputValue[0]&&inputValue[1]!==this.thousandSeparator&&","!==inputValue[1]&&"."!==inputValue[1]?inputValue.slice(1,inputValue.length):inputValue:(inputValue[0]===decimalMarker&&inputValue.length>1&&(inputValue="0"+inputValue.slice(0,inputValue.length+1),this.plusOnePosition=!0),"0"===inputValue[0]&&inputValue[1]!==decimalMarker&&inputValue[1]!==this.thousandSeparator&&(inputValue=inputValue.length>1?inputValue.slice(0,1)+decimalMarker+inputValue.slice(1,inputValue.length+1):inputValue,this.plusOnePosition=!0),!this.allowNegativeNumbers||"-"!==inputValue[0]||inputValue[1]!==decimalMarker&&"0"!==inputValue[1]||(inputValue=inputValue[1]===decimalMarker&&inputValue.length>2?inputValue.slice(0,1)+"0"+inputValue.slice(1,inputValue.length):"0"===inputValue[1]&&inputValue.length>2&&inputValue[2]!==decimalMarker?inputValue.slice(0,2)+decimalMarker+inputValue.slice(2,inputValue.length):inputValue,this.plusOnePosition=!0)),backspaced&&("0"!==inputValue[0]||inputValue[1]!==this.decimalMarker||"0"!==inputValue[position]&&inputValue[position]!==this.decimalMarker||(inputValue=inputValue.slice(2,inputValue.length)),"-"!==inputValue[0]||"0"!==inputValue[1]||inputValue[2]!==this.decimalMarker||"0"!==inputValue[position]&&inputValue[position]!==this.decimalMarker||(inputValue="-"+inputValue.slice(3,inputValue.length)),inputValue=this._compareOrIncludes(inputValue[inputValue.length-1],this.decimalMarker,this.thousandSeparator)?inputValue.slice(0,inputValue.length-1):inputValue);const thousandSeparatorCharEscaped=this._charToRegExpExpression(this.thousandSeparator);let invalidChars='@#!$%^&*()_+|~=`{}\\[\\]:\\s,\\.";<>?\\/'.replace(thousandSeparatorCharEscaped,"");if(Array.isArray(this.decimalMarker))for(const marker of this.decimalMarker)invalidChars=invalidChars.replace(this._charToRegExpExpression(marker),"");else invalidChars=invalidChars.replace(this._charToRegExpExpression(this.decimalMarker),"");const invalidCharRegexp=new RegExp("["+invalidChars+"]");inputValue.match(invalidCharRegexp)&&(inputValue=inputValue.substring(0,inputValue.length-1));const strForSep=(inputValue=this.checkInputPrecision(inputValue,precision,this.decimalMarker)).replace(new RegExp(thousandSeparatorCharEscaped,"g"),"");result=this._formatWithSeparators(strForSep,this.thousandSeparator,this.decimalMarker,precision);const commaShift=result.indexOf(",")-inputValue.indexOf(","),shiftStep=result.length-inputValue.length;if(result[position-1]===this.thousandSeparator&&this.prefix&&backspaced)position-=1;else if(shiftStep>0&&result[position]!==this.thousandSeparator){backspaceShift=!0;let _shift=0;do{this._shift.add(position+_shift),_shift++}while(_shift<shiftStep)}else result[position-1]===this.decimalMarker||-4===shiftStep||-3===shiftStep||","===result[position]?(this._shift.clear(),this._shift.add(position-1)):0!==commaShift&&position>0&&!(result.indexOf(",")>=position&&position>3)||!(result.indexOf(".")>=position&&position>3)&&shiftStep<=0?(this._shift.clear(),backspaceShift=!0,shift=shiftStep,position+=shiftStep,this._shift.add(position)):this._shift.clear()}else for(let i=0,inputSymbol=inputArray[0];i<inputArray.length&&cursor!==maskExpression.length;i++,inputSymbol=inputArray[i]??""){const symbolStarInPattern="*"in this.patterns;if(this._checkSymbolMask(inputSymbol,maskExpression[cursor]??"")&&"?"===maskExpression[cursor+1])result+=inputSymbol,cursor+=2;else if("*"===maskExpression[cursor+1]&&multi&&this._checkSymbolMask(inputSymbol,maskExpression[cursor+2]??""))result+=inputSymbol,cursor+=3,multi=!1;else if(this._checkSymbolMask(inputSymbol,maskExpression[cursor]??"")&&"*"===maskExpression[cursor+1]&&!symbolStarInPattern)result+=inputSymbol,multi=!0;else if("?"===maskExpression[cursor+1]&&this._checkSymbolMask(inputSymbol,maskExpression[cursor+2]??""))result+=inputSymbol,cursor+=3;else if(this._checkSymbolMask(inputSymbol,maskExpression[cursor]??"")){if("H"===maskExpression[cursor]&&(this.apm?Number(inputSymbol)>9:Number(inputSymbol)>2)){position=this.leadZeroDateTime?position:position+1,cursor+=1,this._shiftStep(maskExpression,cursor,inputArray.length),i--,this.leadZeroDateTime&&(result+="0");continue}if("h"===maskExpression[cursor]&&(this.apm?1===result.length&&Number(result)>1||"1"===result&&Number(inputSymbol)>2||1===inputValue.slice(cursor-1,cursor).length&&Number(inputValue.slice(cursor-1,cursor))>2||"1"===inputValue.slice(cursor-1,cursor)&&Number(inputSymbol)>2:"2"===result&&Number(inputSymbol)>3||("2"===result.slice(cursor-2,cursor)||"2"===result.slice(cursor-3,cursor)||"2"===result.slice(cursor-4,cursor)||"2"===result.slice(cursor-1,cursor))&&Number(inputSymbol)>3&&cursor>10)){position+=1,cursor+=1,i--;continue}if(("m"===maskExpression[cursor]||"s"===maskExpression[cursor])&&Number(inputSymbol)>5){position=this.leadZeroDateTime?position:position+1,cursor+=1,this._shiftStep(maskExpression,cursor,inputArray.length),i--,this.leadZeroDateTime&&(result+="0");continue}const daysCount=31,inputValueCursor=inputValue[cursor],inputValueCursorPlusOne=inputValue[cursor+1],inputValueCursorPlusTwo=inputValue[cursor+2],inputValueCursorMinusOne=inputValue[cursor-1],inputValueCursorMinusTwo=inputValue[cursor-2],inputValueCursorMinusThree=inputValue[cursor-3],inputValueSliceMinusThreeMinusOne=inputValue.slice(cursor-3,cursor-1),inputValueSliceMinusOnePlusOne=inputValue.slice(cursor-1,cursor+1),inputValueSliceCursorPlusTwo=inputValue.slice(cursor,cursor+2),inputValueSliceMinusTwoCursor=inputValue.slice(cursor-2,cursor);if("d"===maskExpression[cursor]){const maskStartWithMonth="M0"===maskExpression.slice(0,2),startWithMonthInput="M0"===maskExpression.slice(0,2)&&this.specialCharacters.includes(inputValueCursorMinusTwo);if(Number(inputSymbol)>3&&this.leadZeroDateTime||!maskStartWithMonth&&(Number(inputValueSliceCursorPlusTwo)>daysCount||Number(inputValueSliceMinusOnePlusOne)>daysCount||this.specialCharacters.includes(inputValueCursorPlusOne)&&!backspaced)||(startWithMonthInput?Number(inputValueSliceMinusOnePlusOne)>daysCount||!this.specialCharacters.includes(inputValueCursor)&&this.specialCharacters.includes(inputValueCursorPlusTwo)||this.specialCharacters.includes(inputValueCursor):Number(inputValueSliceCursorPlusTwo)>daysCount||this.specialCharacters.includes(inputValueCursorPlusOne)&&!backspaced)){position=this.leadZeroDateTime?position:position+1,cursor+=1,this._shiftStep(maskExpression,cursor,inputArray.length),i--,this.leadZeroDateTime&&(result+="0");continue}}if("M"===maskExpression[cursor]){const monthsCount=12,withoutDays=0===cursor&&(Number(inputSymbol)>2||Number(inputValueSliceCursorPlusTwo)>monthsCount||this.specialCharacters.includes(inputValueCursorPlusOne)&&!backspaced),specialChart=maskExpression.slice(cursor+2,cursor+3),day1monthInput=inputValueSliceMinusThreeMinusOne.includes(specialChart)&&maskExpression.includes("d0")&&(this.specialCharacters.includes(inputValueCursorMinusTwo)&&Number(inputValueSliceMinusOnePlusOne)>monthsCount&&!this.specialCharacters.includes(inputValueCursor)||this.specialCharacters.includes(inputValueCursor)||this.specialCharacters.includes(inputValueCursorMinusThree)&&Number(inputValueSliceMinusTwoCursor)>monthsCount&&!this.specialCharacters.includes(inputValueCursorMinusOne)||this.specialCharacters.includes(inputValueCursorMinusOne)),day2monthInput=Number(inputValueSliceMinusThreeMinusOne)<=daysCount&&!this.specialCharacters.includes(inputValueSliceMinusThreeMinusOne)&&this.specialCharacters.includes(inputValueCursorMinusOne)&&(Number(inputValueSliceCursorPlusTwo)>monthsCount||this.specialCharacters.includes(inputValueCursorPlusOne)&&!backspaced),day2monthInputDot=Number(inputValueSliceCursorPlusTwo)>monthsCount&&5===cursor||this.specialCharacters.includes(inputValueCursorPlusOne)&&5===cursor,day1monthPaste=Number(inputValueSliceMinusThreeMinusOne)>daysCount&&!this.specialCharacters.includes(inputValueSliceMinusThreeMinusOne)&&!this.specialCharacters.includes(inputValueSliceMinusTwoCursor)&&Number(inputValueSliceMinusTwoCursor)>monthsCount&&maskExpression.includes("d0"),day2monthPaste=Number(inputValueSliceMinusThreeMinusOne)<=daysCount&&!this.specialCharacters.includes(inputValueSliceMinusThreeMinusOne)&&!this.specialCharacters.includes(inputValueCursorMinusOne)&&Number(inputValueSliceMinusOnePlusOne)>monthsCount;if(Number(inputSymbol)>1&&this.leadZeroDateTime||withoutDays||day1monthInput||day2monthPaste||day1monthPaste||day2monthInput||day2monthInputDot&&!this.leadZeroDateTime){position=this.leadZeroDateTime?position:position+1,cursor+=1,this._shiftStep(maskExpression,cursor,inputArray.length),i--,this.leadZeroDateTime&&(result+="0");continue}}result+=inputSymbol,cursor++}else" "===inputSymbol&&" "===maskExpression[cursor]||"/"===inputSymbol&&"/"===maskExpression[cursor]?(result+=inputSymbol,cursor++):-1!==this.specialCharacters.indexOf(maskExpression[cursor]??"")?(result+=maskExpression[cursor],cursor++,this._shiftStep(maskExpression,cursor,inputArray.length),i--):"9"===maskExpression[cursor]&&this.showMaskTyped?this._shiftStep(maskExpression,cursor,inputArray.length):this.patterns[maskExpression[cursor]??""]&&this.patterns[maskExpression[cursor]??""]?.optional?(!inputArray[cursor]||"099.099.099.099"===maskExpression||"000.000.000-00"===maskExpression||"00.000.000/0000-00"===maskExpression||maskExpression.match(/^9+\.0+$/)||this.patterns[maskExpression[cursor]??""]?.optional||(result+=inputArray[cursor]),maskExpression.includes("9*")&&maskExpression.includes("0*")&&cursor++,cursor++,i--):"*"===this.maskExpression[cursor+1]&&this._findSpecialChar(this.maskExpression[cursor+2]??"")&&this._findSpecialChar(inputSymbol)===this.maskExpression[cursor+2]&&multi||"?"===this.maskExpression[cursor+1]&&this._findSpecialChar(this.maskExpression[cursor+2]??"")&&this._findSpecialChar(inputSymbol)===this.maskExpression[cursor+2]&&multi?(cursor+=3,result+=inputSymbol):this.showMaskTyped&&this.specialCharacters.indexOf(inputSymbol)<0&&inputSymbol!==this.placeHolderCharacter&&1===this.placeHolderCharacter.length&&(stepBack=!0)}result.length+1===maskExpression.length&&-1!==this.specialCharacters.indexOf(maskExpression[maskExpression.length-1]??"")&&(result+=maskExpression[maskExpression.length-1]);let newPosition=position+1;for(;this._shift.has(newPosition);)shift++,newPosition++;let actualShift=justPasted&&!maskExpression.startsWith("separator")?cursor:this._shift.has(position)?shift:0;stepBack&&actualShift--,cb(actualShift,backspaceShift),shift<0&&this._shift.clear();let onlySpecial=!1;backspaced&&(onlySpecial=inputArray.every((char=>this.specialCharacters.includes(char))));let res=`${this.prefix}${onlySpecial?"":result}${this.showMaskTyped?"":this.suffix}`;if(0===result.length&&(res=this.dropSpecialCharacters?`${result}`:`${this.prefix}${result}`),result.includes("-")&&this.prefix&&this.allowNegativeNumbers){if(backspaced&&"-"===result)return"";res=`-${this.prefix}${result.split("-").join("")}${this.suffix}`}return res}_findDropSpecialChar(inputSymbol){return Array.isArray(this.dropSpecialCharacters)?this.dropSpecialCharacters.find((val=>val===inputSymbol)):this._findSpecialChar(inputSymbol)}_findSpecialChar(inputSymbol){return this.specialCharacters.find((val=>val===inputSymbol))}_checkSymbolMask(inputSymbol,maskSymbol){return this.patterns=this.customPattern?this.customPattern:this.patterns,(this.patterns[maskSymbol]?.pattern&&this.patterns[maskSymbol]?.pattern.test(inputSymbol))??!1}_stripToDecimal(str){return str.split("").filter(((i,idx)=>{const isDecimalMarker="string"==typeof this.decimalMarker?i===this.decimalMarker:this.decimalMarker.includes(i);return i.match("^-?\\d")||i===this.thousandSeparator||isDecimalMarker||"-"===i&&0===idx&&this.allowNegativeNumbers})).join("")}_charToRegExpExpression(char){if(char){return" "===char?"\\s":"[\\^$.|?*+()".indexOf(char)>=0?`\\${char}`:char}return char}_shiftStep(maskExpression,cursor,inputLength){const shiftStep=/[*?]/g.test(maskExpression.slice(0,cursor))?inputLength:cursor;this._shift.add(shiftStep+this.prefix.length||0)}_compareOrIncludes(value,comparedValue,excludedValue){return Array.isArray(comparedValue)?comparedValue.filter((v=>v!==excludedValue)).includes(value):value===comparedValue}_validIP(valuesIP){return!(4===valuesIP.length&&!valuesIP.some(((value,index)=>valuesIP.length!==index+1?""===value||Number(value)>255:""===value||Number(value.substring(0,3))>255)))}_splitPercentZero(value){if("-"===value&&this.allowNegativeNumbers)return value;const decimalIndex="string"==typeof this.decimalMarker?value.indexOf(this.decimalMarker):value.indexOf("."),emptyOrMinus=this.allowNegativeNumbers&&value.includes("-")?"-":"";if(-1===decimalIndex){const parsedValue=parseInt(emptyOrMinus?value.slice(1,value.length):value,10);return isNaN(parsedValue)?"":`${emptyOrMinus}${parsedValue}`}{const integerPart=parseInt(value.replace("-","").substring(0,decimalIndex),10),decimalPart=value.substring(decimalIndex+1),integerString=isNaN(integerPart)?"":integerPart.toString(),decimal="string"==typeof this.decimalMarker?this.decimalMarker:".";return""===integerString?"":`${emptyOrMinus}${integerString}${decimal}${decimalPart}`}}static#_=this.ɵfac=function NgxMaskApplierService_Factory(t){return new(t||NgxMaskApplierService)};static#_2=this.ɵprov=_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjectable"]({token:NgxMaskApplierService,factory:NgxMaskApplierService.ɵfac})}("undefined"==typeof ngDevMode||ngDevMode)&&_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](NgxMaskApplierService,[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Injectable}],null,null);class NgxMaskService extends NgxMaskApplierService{constructor(){super(...arguments),this.isNumberValue=!1,this.maskIsShown="",this.selStart=null,this.selEnd=null,this.writingValue=!1,this.maskChanged=!1,this._maskExpressionArray=[],this.triggerOnMaskChange=!1,this._previousValue="",this._currentValue="",this._emitValue=!1,this.onChange=_=>{},this._elementRef=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.inject)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.ElementRef,{optional:!0}),this.document=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.inject)(_angular_common__WEBPACK_IMPORTED_MODULE_1__.DOCUMENT),this._config=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.inject)(NGX_MASK_CONFIG),this._renderer=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.inject)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.Renderer2,{optional:!0})}applyMask(inputValue,maskExpression,position=0,justPasted=!1,backspaced=!1,cb=(()=>{})){if(!maskExpression)return inputValue!==this.actualValue?this.actualValue:inputValue;if(this.maskIsShown=this.showMaskTyped?this.showMaskInInput():"","IP"===this.maskExpression&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(inputValue||"#")),"CPF_CNPJ"===this.maskExpression&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(inputValue||"#")),!inputValue&&this.showMaskTyped)return this.formControlResult(this.prefix),`${this.prefix}${this.maskIsShown}${this.suffix}`;const getSymbol=inputValue&&"number"==typeof this.selStart?inputValue[this.selStart]??"":"";let newInputValue="";if(void 0!==this.hiddenInput&&!this.writingValue){let actualResult=inputValue&&1===inputValue.length?inputValue.split(""):this.actualValue.split("");"object"==typeof this.selStart&&"object"==typeof this.selEnd?(this.selStart=Number(this.selStart),this.selEnd=Number(this.selEnd)):""!==inputValue&&actualResult.length?"number"==typeof this.selStart&&"number"==typeof this.selEnd&&(inputValue.length>actualResult.length?actualResult.splice(this.selStart,0,getSymbol):inputValue.length<actualResult.length&&(actualResult.length-inputValue.length==1?backspaced?actualResult.splice(this.selStart-1,1):actualResult.splice(inputValue.length-1,1):actualResult.splice(this.selStart,this.selEnd-this.selStart))):actualResult=[],this.showMaskTyped&&(this.hiddenInput||(inputValue=this.removeMask(inputValue))),newInputValue=this.actualValue.length&&actualResult.length<=inputValue.length?this.shiftTypedSymbols(actualResult.join("")):inputValue}if(!justPasted||!this.hiddenInput&&this.hiddenInput||(newInputValue=inputValue),backspaced&&-1!==this.specialCharacters.indexOf(this.maskExpression[position]??"")&&this.showMaskTyped&&!this.prefix&&(newInputValue=this._currentValue),this.deletedSpecialCharacter&&position&&(this.specialCharacters.includes(this.actualValue.slice(position,position+1))?position+=1:"M0"!==maskExpression.slice(position-1,position+1)&&(position-=2),this.deletedSpecialCharacter=!1),this.showMaskTyped&&1===this.placeHolderCharacter.length&&!this.leadZeroDateTime&&(inputValue=this.removeMask(inputValue)),newInputValue=this.maskChanged?inputValue:Boolean(newInputValue)&&newInputValue.length?newInputValue:inputValue,this.showMaskTyped&&this.keepCharacterPositions&&this.actualValue&&!justPasted){const value=this.dropSpecialCharacters?this.removeMask(this.actualValue):this.actualValue;return this.formControlResult(value),this.actualValue?this.actualValue:`${this.prefix}${this.maskIsShown}${this.suffix}`}const result=super.applyMask(newInputValue,maskExpression,position,justPasted,backspaced,cb);if(this.actualValue=this.getActualValue(result),"."===this.thousandSeparator&&"."===this.decimalMarker&&(this.decimalMarker=","),this.maskExpression.startsWith("separator")&&!0===this.dropSpecialCharacters&&(this.specialCharacters=this.specialCharacters.filter((item=>!this._compareOrIncludes(item,this.decimalMarker,this.thousandSeparator)))),(result||""===result)&&(this._previousValue=this._currentValue,this._currentValue=result,this._emitValue=this._previousValue!==this._currentValue||this.maskChanged||this._previousValue===this._currentValue&&justPasted),this._emitValue&&(this.writingValue?requestAnimationFrame((()=>this.formControlResult(result))):this.formControlResult(result)),!this.showMaskTyped||this.showMaskTyped&&this.hiddenInput)return this.hiddenInput?backspaced?this.hideInput(result,this.maskExpression):`${this.hideInput(result,this.maskExpression)}${this.maskIsShown.slice(result.length)}`:result;const resLen=result.length,prefNmask=`${this.prefix}${this.maskIsShown}${this.suffix}`;if(this.maskExpression.includes("H")){const countSkipedSymbol=this._numberSkipedSymbols(result);return`${result}${prefNmask.slice(resLen+countSkipedSymbol)}`}return"IP"===this.maskExpression||"CPF_CNPJ"===this.maskExpression?`${result}${prefNmask}`:`${result}${prefNmask.slice(resLen)}`}_numberSkipedSymbols(value){const regex=/(^|\D)(\d\D)/g;let match=regex.exec(value),countSkipedSymbol=0;for(;null!=match;)countSkipedSymbol+=1,match=regex.exec(value);return countSkipedSymbol}applyValueChanges(position,justPasted,backspaced,cb=(()=>{})){const formElement=this._elementRef?.nativeElement;formElement&&(formElement.value=this.applyMask(formElement.value,this.maskExpression,position,justPasted,backspaced,cb),formElement!==this._getActiveElement()&&this.clearIfNotMatchFn())}hideInput(inputValue,maskExpression){return inputValue.split("").map(((curr,index)=>this.patterns&&this.patterns[maskExpression[index]??""]&&this.patterns[maskExpression[index]??""]?.symbol?this.patterns[maskExpression[index]??""]?.symbol:curr)).join("")}getActualValue(res){const compare=res.split("").filter(((symbol,i)=>{const maskChar=this.maskExpression[i]??"";return this._checkSymbolMask(symbol,maskChar)||this.specialCharacters.includes(maskChar)&&symbol===maskChar}));return compare.join("")===res?compare.join(""):res}shiftTypedSymbols(inputValue){let symbolToReplace="";return(inputValue&&inputValue.split("").map(((currSymbol,index)=>{if(this.specialCharacters.includes(inputValue[index+1]??"")&&inputValue[index+1]!==this.maskExpression[index+1])return symbolToReplace=currSymbol,inputValue[index+1];if(symbolToReplace.length){const replaceSymbol=symbolToReplace;return symbolToReplace="",replaceSymbol}return currSymbol}))||[]).join("")}numberToString(value){return!value&&0!==value||this.maskExpression.startsWith("separator")&&(this.leadZero||!this.dropSpecialCharacters)||this.maskExpression.startsWith("separator")&&this.separatorLimit.length>14&&String(value).length>14?String(value):Number(value).toLocaleString("fullwide",{useGrouping:!1,maximumFractionDigits:20}).replace("/-/","-")}showMaskInInput(inputVal){if(this.showMaskTyped&&this.shownMaskExpression){if(this.maskExpression.length!==this.shownMaskExpression.length)throw new Error("Mask expression must match mask placeholder length");return this.shownMaskExpression}if(this.showMaskTyped){if(inputVal){if("IP"===this.maskExpression)return this._checkForIp(inputVal);if("CPF_CNPJ"===this.maskExpression)return this._checkForCpfCnpj(inputVal)}return this.placeHolderCharacter.length===this.maskExpression.length?this.placeHolderCharacter:this.maskExpression.replace(/\w/g,this.placeHolderCharacter)}return""}clearIfNotMatchFn(){const formElement=this._elementRef?.nativeElement;formElement&&this.clearIfNotMatch&&this.prefix.length+this.maskExpression.length+this.suffix.length!==formElement.value.replace(this.placeHolderCharacter,"").length&&(this.formElementProperty=["value",""],this.applyMask("",this.maskExpression))}set formElementProperty([name,value]){this._renderer&&this._elementRef&&Promise.resolve().then((()=>this._renderer?.setProperty(this._elementRef?.nativeElement,name,value)))}checkDropSpecialCharAmount(mask){return mask.split("").filter((item=>this._findDropSpecialChar(item))).length}removeMask(inputValue){return this._removeMask(this._removeSuffix(this._removePrefix(inputValue)),this.specialCharacters.concat("_").concat(this.placeHolderCharacter))}_checkForIp(inputVal){if("#"===inputVal)return`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`;const arr=[];for(let i=0;i<inputVal.length;i++){const value=inputVal[i]??"";value&&(value.match("\\d")&&arr.push(value))}return arr.length<=3?`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`:arr.length>3&&arr.length<=6?`${this.placeHolderCharacter}.${this.placeHolderCharacter}`:arr.length>6&&arr.length<=9?this.placeHolderCharacter:(arr.length>9&&arr.length,"")}_checkForCpfCnpj(inputVal){const cpf=`${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`,cnpj=`${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}/${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`;if("#"===inputVal)return cpf;const arr=[];for(let i=0;i<inputVal.length;i++){const value=inputVal[i]??"";value&&(value.match("\\d")&&arr.push(value))}return arr.length<=3?cpf.slice(arr.length,cpf.length):arr.length>3&&arr.length<=6?cpf.slice(arr.length+1,cpf.length):arr.length>6&&arr.length<=9?cpf.slice(arr.length+2,cpf.length):arr.length>9&&arr.length<11?cpf.slice(arr.length+3,cpf.length):11===arr.length?"":12===arr.length?17===inputVal.length?cnpj.slice(16,cnpj.length):cnpj.slice(15,cnpj.length):arr.length>12&&arr.length<=14?cnpj.slice(arr.length+4,cnpj.length):""}_getActiveElement(document=this.document){const shadowRootEl=document?.activeElement?.shadowRoot;return shadowRootEl?.activeElement?this._getActiveElement(shadowRootEl):document.activeElement}formControlResult(inputValue){if(this.writingValue||!this.triggerOnMaskChange&&this.maskChanged)return this.maskChanged&&this.onChange(this.outputTransformFn(this._toNumber(this._checkSymbols(this._removeSuffix(this._removePrefix(inputValue)))))),void(this.maskChanged=!1);Array.isArray(this.dropSpecialCharacters)?this.onChange(this.outputTransformFn(this._toNumber(this._checkSymbols(this._removeMask(this._removeSuffix(this._removePrefix(inputValue)),this.dropSpecialCharacters))))):this.dropSpecialCharacters||!this.dropSpecialCharacters&&this.prefix===inputValue?this.onChange(this.outputTransformFn(this._toNumber(this._checkSymbols(this._removeSuffix(this._removePrefix(inputValue)))))):this.onChange(this.outputTransformFn(this._toNumber(inputValue)))}_toNumber(value){if(!this.isNumberValue||""===value)return value;if(this.maskExpression.startsWith("separator")&&(this.leadZero||!this.dropSpecialCharacters))return value;if(String(value).length>16&&this.separatorLimit.length>14)return String(value);const num=Number(value);if(this.maskExpression.startsWith("separator")&&Number.isNaN(num)){const val=String(value).replace(",",".");return Number(val)}return Number.isNaN(num)?value:num}_removeMask(value,specialCharactersForRemove){return this.maskExpression.startsWith("percent")&&value.includes(".")?value:value?value.replace(this._regExpForRemove(specialCharactersForRemove),""):value}_removePrefix(value){return this.prefix&&value?value.replace(this.prefix,""):value}_removeSuffix(value){return this.suffix&&value?value.replace(this.suffix,""):value}_retrieveSeparatorValue(result){let specialCharacters=Array.isArray(this.dropSpecialCharacters)?this.specialCharacters.filter((v=>this.dropSpecialCharacters.includes(v))):this.specialCharacters;return!this.deletedSpecialCharacter&&this._checkPatternForSpace()&&result.includes(" ")&&this.maskExpression.includes("*")&&(specialCharacters=specialCharacters.filter((char=>" "!==char))),this._removeMask(result,specialCharacters)}_regExpForRemove(specialCharactersForRemove){return new RegExp(specialCharactersForRemove.map((item=>`\\${item}`)).join("|"),"gi")}_replaceDecimalMarkerToDot(value){const markers=Array.isArray(this.decimalMarker)?this.decimalMarker:[this.decimalMarker];return value.replace(this._regExpForRemove(markers),".")}_checkSymbols(result){if(""===result)return result;this.maskExpression.startsWith("percent")&&","===this.decimalMarker&&(result=result.replace(",","."));const separatorPrecision=this._retrieveSeparatorPrecision(this.maskExpression),separatorValue=this._replaceDecimalMarkerToDot(this._retrieveSeparatorValue(result));return this.isNumberValue&&separatorPrecision?result===this.decimalMarker?null:this.separatorLimit.length>14?String(separatorValue):this._checkPrecision(this.maskExpression,separatorValue):separatorValue}_checkPatternForSpace(){for(const key in this.patterns)if(this.patterns[key]&&this.patterns[key]?.hasOwnProperty("pattern")){const patternString=this.patterns[key]?.pattern.toString(),pattern=this.patterns[key]?.pattern;if(patternString?.includes(" ")&&pattern?.test(this.maskExpression))return!0}return!1}_retrieveSeparatorPrecision(maskExpretion){const matcher=maskExpretion.match(new RegExp("^separator\\.([^d]*)"));return matcher?Number(matcher[1]):null}_checkPrecision(separatorExpression,separatorValue){const separatorPrecision=separatorExpression.slice(10,11);return separatorExpression.indexOf("2")>0||this.leadZero&&Number(separatorPrecision)>1?(","===this.decimalMarker&&this.leadZero&&(separatorValue=separatorValue.replace(",",".")),this.leadZero?Number(separatorValue).toFixed(Number(separatorPrecision)):Number(separatorValue).toFixed(2)):this.numberToString(separatorValue)}_repeatPatternSymbols(maskExp){return maskExp.match(/{[0-9]+}/)&&maskExp.split("").reduce(((accum,currVal,index)=>{if(this._start="{"===currVal?index:this._start,"}"!==currVal)return this._findSpecialChar(currVal)?accum+currVal:accum;this._end=index;const repeatNumber=Number(maskExp.slice(this._start+1,this._end)),replaceWith=new Array(repeatNumber+1).join(maskExp[this._start-1]);if(maskExp.slice(0,this._start).length>1&&maskExp.includes("S")){const symbols=maskExp.slice(0,this._start-1);return symbols.includes("{")?accum+replaceWith:symbols+accum+replaceWith}return accum+replaceWith}),"")||maskExp}currentLocaleDecimalMarker(){return 1.1.toLocaleString().substring(1,2)}static#_=this.ɵfac=(()=>{let ɵNgxMaskService_BaseFactory;return function NgxMaskService_Factory(t){return(ɵNgxMaskService_BaseFactory||(ɵNgxMaskService_BaseFactory=_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetInheritedFactory"](NgxMaskService)))(t||NgxMaskService)}})();static#_2=this.ɵprov=_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjectable"]({token:NgxMaskService,factory:NgxMaskService.ɵfac})}function _configFactory(){const initConfig=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.inject)(INITIAL_CONFIG),configValue=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.inject)(NEW_CONFIG);return configValue instanceof Function?{...initConfig,...configValue()}:{...initConfig,...configValue}}function provideNgxMask(configValue){return[{provide:NEW_CONFIG,useValue:configValue},{provide:INITIAL_CONFIG,useValue:initialConfig},{provide:NGX_MASK_CONFIG,useFactory:_configFactory},NgxMaskService]}("undefined"==typeof ngDevMode||ngDevMode)&&_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](NgxMaskService,[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Injectable}],null,null);class NgxMaskDirective{constructor(){this.maskExpression="",this.specialCharacters=[],this.patterns={},this.prefix="",this.suffix="",this.thousandSeparator=" ",this.decimalMarker=".",this.dropSpecialCharacters=null,this.hiddenInput=null,this.showMaskTyped=null,this.placeHolderCharacter=null,this.shownMaskExpression=null,this.showTemplate=null,this.clearIfNotMatch=null,this.validation=null,this.separatorLimit=null,this.allowNegativeNumbers=null,this.leadZeroDateTime=null,this.leadZero=null,this.triggerOnMaskChange=null,this.apm=null,this.inputTransformFn=null,this.outputTransformFn=null,this.keepCharacterPositions=null,this.maskFilled=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.EventEmitter,this._maskValue="",this._position=null,this._maskExpressionArray=[],this._justPasted=!1,this._isFocused=!1,this._isComposing=!1,this.document=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.inject)(_angular_common__WEBPACK_IMPORTED_MODULE_1__.DOCUMENT),this._maskService=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.inject)(NgxMaskService,{self:!0}),this._config=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.inject)(NGX_MASK_CONFIG),this.onChange=_=>{},this.onTouch=()=>{}}ngOnChanges(changes){const{maskExpression,specialCharacters,patterns,prefix,suffix,thousandSeparator,decimalMarker,dropSpecialCharacters,hiddenInput,showMaskTyped,placeHolderCharacter,shownMaskExpression,showTemplate,clearIfNotMatch,validation,separatorLimit,allowNegativeNumbers,leadZeroDateTime,leadZero,triggerOnMaskChange,apm,inputTransformFn,outputTransformFn,keepCharacterPositions}=changes;if(maskExpression&&(maskExpression.currentValue===maskExpression.previousValue||maskExpression.firstChange||(this._maskService.maskChanged=!0),maskExpression.currentValue&&maskExpression.currentValue.split("||").length>1?(this._maskExpressionArray=maskExpression.currentValue.split("||").sort(((a,b)=>a.length-b.length)),this._setMask()):(this._maskExpressionArray=[],this._maskValue=maskExpression.currentValue||"",this._maskService.maskExpression=this._maskValue)),specialCharacters){if(!specialCharacters.currentValue||!Array.isArray(specialCharacters.currentValue))return;this._maskService.specialCharacters=specialCharacters.currentValue||[]}allowNegativeNumbers&&(this._maskService.allowNegativeNumbers=allowNegativeNumbers.currentValue,this._maskService.allowNegativeNumbers&&(this._maskService.specialCharacters=this._maskService.specialCharacters.filter((c=>"-"!==c)))),patterns&&patterns.currentValue&&(this._maskService.patterns=patterns.currentValue),apm&&apm.currentValue&&(this._maskService.apm=apm.currentValue),prefix&&(this._maskService.prefix=prefix.currentValue),suffix&&(this._maskService.suffix=suffix.currentValue),thousandSeparator&&(this._maskService.thousandSeparator=thousandSeparator.currentValue),decimalMarker&&(this._maskService.decimalMarker=decimalMarker.currentValue),dropSpecialCharacters&&(this._maskService.dropSpecialCharacters=dropSpecialCharacters.currentValue),hiddenInput&&(this._maskService.hiddenInput=hiddenInput.currentValue),showMaskTyped&&(this._maskService.showMaskTyped=showMaskTyped.currentValue,!1===showMaskTyped.previousValue&&!0===showMaskTyped.currentValue&&this._isFocused&&requestAnimationFrame((()=>{this._maskService._elementRef?.nativeElement.click()}))),placeHolderCharacter&&(this._maskService.placeHolderCharacter=placeHolderCharacter.currentValue),shownMaskExpression&&(this._maskService.shownMaskExpression=shownMaskExpression.currentValue),showTemplate&&(this._maskService.showTemplate=showTemplate.currentValue),clearIfNotMatch&&(this._maskService.clearIfNotMatch=clearIfNotMatch.currentValue),validation&&(this._maskService.validation=validation.currentValue),separatorLimit&&(this._maskService.separatorLimit=separatorLimit.currentValue),leadZeroDateTime&&(this._maskService.leadZeroDateTime=leadZeroDateTime.currentValue),leadZero&&(this._maskService.leadZero=leadZero.currentValue),triggerOnMaskChange&&(this._maskService.triggerOnMaskChange=triggerOnMaskChange.currentValue),inputTransformFn&&(this._maskService.inputTransformFn=inputTransformFn.currentValue),outputTransformFn&&(this._maskService.outputTransformFn=outputTransformFn.currentValue),keepCharacterPositions&&(this._maskService.keepCharacterPositions=keepCharacterPositions.currentValue),this._applyMask()}validate({value}){if(!this._maskService.validation||!this._maskValue)return null;if(this._maskService.ipError)return this._createValidationError(value);if(this._maskService.cpfCnpjError)return this._createValidationError(value);if(this._maskValue.startsWith("separator"))return null;if(withoutValidation.includes(this._maskValue))return null;if(this._maskService.clearIfNotMatch)return null;if(timeMasks.includes(this._maskValue))return this._validateTime(value);if(value&&value.toString().length>=1){let counterOfOpt=0;if(this._maskValue.startsWith("percent"))return null;for(const key in this._maskService.patterns)if(this._maskService.patterns[key]?.optional){if(this._maskValue.indexOf(key)!==this._maskValue.lastIndexOf(key)){counterOfOpt+=this._maskValue.split("").filter((i=>i===key)).join("").length}else-1!==this._maskValue.indexOf(key)&&counterOfOpt++;if(-1!==this._maskValue.indexOf(key)&&value.toString().length>=this._maskValue.indexOf(key))return null;if(counterOfOpt===this._maskValue.length)return null}if(1===this._maskValue.indexOf("{")&&value.toString().length===this._maskValue.length+Number((this._maskValue.split("{")[1]??"").split("}")[0])-4)return null;if(this._maskValue.indexOf("*")>1&&value.toString().length<this._maskValue.indexOf("*")||this._maskValue.indexOf("?")>1&&value.toString().length<this._maskValue.indexOf("?")||1===this._maskValue.indexOf("{"))return this._createValidationError(value);if(-1===this._maskValue.indexOf("*")||-1===this._maskValue.indexOf("?")){value="number"==typeof value?String(value):value;const array=this._maskValue.split("*"),length=this._maskService.dropSpecialCharacters?this._maskValue.length-this._maskService.checkDropSpecialCharAmount(this._maskValue)-counterOfOpt:this.prefix?this._maskValue.length+this.prefix.length-counterOfOpt:this._maskValue.length-counterOfOpt;if(1===array.length&&value.toString().length<length)return this._createValidationError(value);if(array.length>1){const lastIndexArray=array[array.length-1];if(lastIndexArray&&this._maskService.specialCharacters.includes(lastIndexArray[0])&&String(value).includes(lastIndexArray[0]??"")&&!this.dropSpecialCharacters){const special=value.split(lastIndexArray[0]);return special[special.length-1].length===lastIndexArray.length-1?null:this._createValidationError(value)}return(lastIndexArray&&!this._maskService.specialCharacters.includes(lastIndexArray[0])||!lastIndexArray||this._maskService.dropSpecialCharacters)&&value.length>=length-1?null:this._createValidationError(value)}}if(1===this._maskValue.indexOf("*")||1===this._maskValue.indexOf("?"))return null}return value?(this.maskFilled.emit(),null):null}onPaste(){this._justPasted=!0}onFocus(){this._isFocused=!0}onModelChange(value){""!==value&&null!=value||!this._maskService.actualValue||(this._maskService.actualValue=this._maskService.getActualValue(""))}onInput(e){if(this._isComposing)return;const el=e.target,transformedValue=this._maskService.inputTransformFn(el.value);if("number"!==el.type)if("string"==typeof transformedValue||"number"==typeof transformedValue){if(el.value=transformedValue.toString(),this._inputValue=el.value,this._setMask(),!this._maskValue)return void this.onChange(el.value);let position=1===el.selectionStart?el.selectionStart+this._maskService.prefix.length:el.selectionStart;if(this.showMaskTyped&&this.keepCharacterPositions&&1===this._maskService.placeHolderCharacter.length){const inputSymbol=el.value.slice(position-1,position),prefixLength=this.prefix.length,checkSymbols=this._maskService._checkSymbolMask(inputSymbol,this._maskService.maskExpression[position-1-prefixLength]??""),checkSpecialCharacter=this._maskService._checkSymbolMask(inputSymbol,this._maskService.maskExpression[position+1-prefixLength]??""),selectRangeBackspace=this._maskService.selStart===this._maskService.selEnd,selStart=Number(this._maskService.selStart)-prefixLength,selEnd=Number(this._maskService.selEnd)-prefixLength;if("Backspace"===this._code)if(selectRangeBackspace){if(!this._maskService.specialCharacters.includes(this._maskService.maskExpression.slice(position-this.prefix.length,position+1-this.prefix.length))&&selectRangeBackspace)if(1===selStart&&this.prefix)this._maskService.actualValue=`${this.prefix}${this._maskService.placeHolderCharacter}${el.value.split(this.prefix).join("").split(this.suffix).join("")}${this.suffix}`,position-=1;else{const part1=el.value.substring(0,position),part2=el.value.substring(position);this._maskService.actualValue=`${part1}${this._maskService.placeHolderCharacter}${part2}`}}else this._maskService.selStart===prefixLength?this._maskService.actualValue=`${this.prefix}${this._maskService.maskIsShown.slice(0,selEnd)}${this._inputValue.split(this.prefix).join("")}`:this._maskService.selStart===this._maskService.maskIsShown.length+prefixLength?this._maskService.actualValue=`${this._inputValue}${this._maskService.maskIsShown.slice(selStart,selEnd)}`:this._maskService.actualValue=`${this.prefix}${this._inputValue.split(this.prefix).join("").slice(0,selStart)}${this._maskService.maskIsShown.slice(selStart,selEnd)}${this._maskService.actualValue.slice(selEnd+prefixLength,this._maskService.maskIsShown.length+prefixLength)}${this.suffix}`;"Backspace"!==this._code&&(checkSymbols||checkSpecialCharacter||!selectRangeBackspace?this._maskService.specialCharacters.includes(el.value.slice(position,position+1))&&checkSpecialCharacter&&!this._maskService.specialCharacters.includes(el.value.slice(position+1,position+2))?(this._maskService.actualValue=`${el.value.slice(0,position-1)}${el.value.slice(position,position+1)}${inputSymbol}${el.value.slice(position+2)}`,position+=1):checkSymbols?1===el.value.length&&1===position?this._maskService.actualValue=`${this.prefix}${inputSymbol}${this._maskService.maskIsShown.slice(1,this._maskService.maskIsShown.length)}${this.suffix}`:this._maskService.actualValue=`${el.value.slice(0,position-1)}${inputSymbol}${el.value.slice(position+1).split(this.suffix).join("")}${this.suffix}`:this.prefix&&1===el.value.length&&position-prefixLength==1&&this._maskService._checkSymbolMask(el.value,this._maskService.maskExpression[position-1-prefixLength]??"")&&(this._maskService.actualValue=`${this.prefix}${el.value}${this._maskService.maskIsShown.slice(1,this._maskService.maskIsShown.length)}${this.suffix}`):position=Number(el.selectionStart)-1)}let caretShift=0,backspaceShift=!1;if("Delete"===this._code&&(this._maskService.deletedSpecialCharacter=!0),this._inputValue.length>=this._maskService.maskExpression.length-1&&"Backspace"!==this._code&&"d0/M0/0000"===this._maskService.maskExpression&&position<10){const inputSymbol=this._inputValue.slice(position-1,position);el.value=this._inputValue.slice(0,position-1)+inputSymbol+this._inputValue.slice(position+1)}if("d0/M0/0000"===this._maskService.maskExpression&&this.leadZeroDateTime&&(position<3&&Number(el.value)>31&&Number(el.value)<40||5===position&&Number(el.value.slice(3,5))>12)&&(position+=2),"Hh:m0:s0"===this._maskService.maskExpression&&this.apm&&(this._justPasted&&"00"===el.value.slice(0,2)&&(el.value=el.value.slice(1,2)+el.value.slice(2,el.value.length)),el.value="00"===el.value?"0":el.value),this._maskService.applyValueChanges(position,this._justPasted,"Backspace"===this._code||"Delete"===this._code,((shift,_backspaceShift)=>{this._justPasted=!1,caretShift=shift,backspaceShift=_backspaceShift})),this._getActiveElement()!==el)return;this._maskService.plusOnePosition&&(position+=1,this._maskService.plusOnePosition=!1),this._maskExpressionArray.length&&(position="Backspace"===this._code?this.specialCharacters.includes(this._inputValue.slice(position-1,position))?position-1:position:1===el.selectionStart?el.selectionStart+this._maskService.prefix.length:el.selectionStart),this._position=1===this._position&&1===this._inputValue.length?null:this._position;let positionToApply=this._position?this._inputValue.length+position+caretShift:position+("Backspace"!==this._code||backspaceShift?caretShift:0);positionToApply>this._getActualInputLength()&&(positionToApply=el.value===this._maskService.decimalMarker&&1===el.value.length?this._getActualInputLength()+1:this._getActualInputLength()),positionToApply<0&&(positionToApply=0),el.setSelectionRange(positionToApply,positionToApply),this._position=null}else console.warn("Ngx-mask writeValue work with string | number, your current value:",typeof transformedValue);else{if(!this._maskValue)return void this.onChange(el.value);this._maskService.applyValueChanges(el.value.length,this._justPasted,"Backspace"===this._code||"Delete"===this._code)}}onCompositionStart(){this._isComposing=!0}onCompositionEnd(e){this._isComposing=!1,this._justPasted=!0,this.onInput(e)}onBlur(e){if(this._maskValue){const el=e.target;if(this.leadZero&&el.value.length>0&&"string"==typeof this.decimalMarker){const maskExpression=this._maskService.maskExpression,precision=Number(this._maskService.maskExpression.slice(maskExpression.length-1,maskExpression.length));if(precision>1){el.value=this.suffix?el.value.split(this.suffix).join(""):el.value;const decimalPart=el.value.split(this.decimalMarker)[1];el.value=el.value.includes(this.decimalMarker)?el.value+"0".repeat(precision-decimalPart.length)+this.suffix:el.value+this.decimalMarker+"0".repeat(precision)+this.suffix,this._maskService.actualValue=el.value}}this._maskService.clearIfNotMatchFn()}this._isFocused=!1,this.onTouch()}onClick(e){if(!this._maskValue)return;const el=e.target;null!==el&&null!==el.selectionStart&&el.selectionStart===el.selectionEnd&&el.selectionStart>this._maskService.prefix.length&&38!==e.keyCode&&this._maskService.showMaskTyped&&!this.keepCharacterPositions&&(this._maskService.maskIsShown=this._maskService.showMaskInInput(),el.setSelectionRange&&this._maskService.prefix+this._maskService.maskIsShown===el.value?(el.focus(),el.setSelectionRange(0,0)):el.selectionStart>this._maskService.actualValue.length&&el.setSelectionRange(this._maskService.actualValue.length,this._maskService.actualValue.length));const nextValue=el&&(el.value===this._maskService.prefix?this._maskService.prefix+this._maskService.maskIsShown:el.value);el&&el.value!==nextValue&&(el.value=nextValue),el&&"number"!==el.type&&(el.selectionStart||el.selectionEnd)<=this._maskService.prefix.length?el.selectionStart=this._maskService.prefix.length:el&&el.selectionEnd>this._getActualInputLength()&&(el.selectionEnd=this._getActualInputLength())}onKeyDown(e){if(!this._maskValue)return;if(this._isComposing)return void("Enter"===e.key&&this.onCompositionEnd(e));this._code=e.code?e.code:e.key;const el=e.target;if(this._inputValue=el.value,this._setMask(),"number"!==el.type){if("ArrowUp"===e.key&&e.preventDefault(),"ArrowLeft"===e.key||"Backspace"===e.key||"Delete"===e.key){if("Backspace"===e.key&&0===el.value.length&&(el.selectionStart=el.selectionEnd),"Backspace"===e.key&&0!==el.selectionStart)if(this.specialCharacters=this.specialCharacters?.length?this.specialCharacters:this._config.specialCharacters,this.prefix.length>1&&el.selectionStart<=this.prefix.length)el.setSelectionRange(this.prefix.length,el.selectionEnd);else if(this._inputValue.length!==el.selectionStart&&1!==el.selectionStart)for(;this.specialCharacters.includes((this._inputValue[el.selectionStart-1]??"").toString())&&(this.prefix.length>=1&&el.selectionStart>this.prefix.length||0===this.prefix.length);)el.setSelectionRange(el.selectionStart-1,el.selectionEnd);this.checkSelectionOnDeletion(el),this._maskService.prefix.length&&el.selectionStart<=this._maskService.prefix.length&&el.selectionEnd<=this._maskService.prefix.length&&e.preventDefault();const cursorStart=el.selectionStart;"Backspace"!==e.key||el.readOnly||0!==cursorStart||el.selectionEnd!==el.value.length||0===el.value.length||(this._position=this._maskService.prefix?this._maskService.prefix.length:0,this._maskService.applyMask(this._maskService.prefix,this._maskService.maskExpression,this._position))}this.suffix&&this.suffix.length>1&&this._inputValue.length-this.suffix.length<el.selectionStart?el.setSelectionRange(this._inputValue.length-this.suffix.length,this._inputValue.length):("KeyA"===e.code&&e.ctrlKey||"KeyA"===e.code&&e.metaKey)&&(el.setSelectionRange(0,this._getActualInputLength()),e.preventDefault()),this._maskService.selStart=el.selectionStart,this._maskService.selEnd=el.selectionEnd}}writeValue(controlValue){var _this=this;return(0,C_Users_SPHANDA_Desktop_ui_kit_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_2__.c)((function*(){if("object"==typeof controlValue&&null!==controlValue&&"value"in controlValue&&("disable"in controlValue&&_this.setDisabledState(Boolean(controlValue.disable)),controlValue=controlValue.value),null!==controlValue&&(controlValue=_this.inputTransformFn?_this.inputTransformFn(controlValue):controlValue),"string"==typeof controlValue||"number"==typeof controlValue||null==controlValue){null!=controlValue&&""!==controlValue||(_this._maskService._currentValue="",_this._maskService._previousValue="");let inputValue=controlValue;if("number"==typeof inputValue||_this._maskValue.startsWith("separator")){inputValue=String(inputValue);const localeDecimalMarker=_this._maskService.currentLocaleDecimalMarker();Array.isArray(_this._maskService.decimalMarker)||(inputValue=_this._maskService.decimalMarker!==localeDecimalMarker?inputValue.replace(localeDecimalMarker,_this._maskService.decimalMarker):inputValue),Array.isArray(_this._maskService.decimalMarker)&&"."===_this.decimalMarker&&(_this._maskService.decimalMarker=","),_this._maskService.leadZero&&inputValue&&_this.maskExpression&&!1!==_this.dropSpecialCharacters&&(inputValue=_this._maskService._checkPrecision(_this._maskService.maskExpression,inputValue)),","===_this._maskService.decimalMarker&&(inputValue=inputValue.toString().replace(".",",")),_this.maskExpression?.startsWith("separator")&&_this.leadZero&&requestAnimationFrame((()=>{_this._maskService.applyMask(inputValue?.toString()??"",_this._maskService.maskExpression)})),_this._maskService.isNumberValue=!0}"string"!=typeof inputValue&&(inputValue=""),_this._inputValue=inputValue,_this._setMask(),inputValue&&_this._maskService.maskExpression||_this._maskService.maskExpression&&(_this._maskService.prefix||_this._maskService.showMaskTyped)?("function"!=typeof _this.inputTransformFn&&(_this._maskService.writingValue=!0),_this._maskService.formElementProperty=["value",_this._maskService.applyMask(inputValue,_this._maskService.maskExpression)],"function"!=typeof _this.inputTransformFn&&(_this._maskService.writingValue=!1)):_this._maskService.formElementProperty=["value",inputValue],_this._inputValue=inputValue}else console.warn("Ngx-mask writeValue work with string | number, your current value:",typeof controlValue)}))()}registerOnChange(fn){this._maskService.onChange=this.onChange=fn}registerOnTouched(fn){this.onTouch=fn}_getActiveElement(document=this.document){const shadowRootEl=document?.activeElement?.shadowRoot;return shadowRootEl?.activeElement?this._getActiveElement(shadowRootEl):document.activeElement}checkSelectionOnDeletion(el){el.selectionStart=Math.min(Math.max(this.prefix.length,el.selectionStart),this._inputValue.length-this.suffix.length),el.selectionEnd=Math.min(Math.max(this.prefix.length,el.selectionEnd),this._inputValue.length-this.suffix.length)}setDisabledState(isDisabled){this._maskService.formElementProperty=["disabled",isDisabled]}_applyMask(){this._maskService.maskExpression=this._maskService._repeatPatternSymbols(this._maskValue||""),this._maskService.formElementProperty=["value",this._maskService.applyMask(this._inputValue,this._maskService.maskExpression)]}_validateTime(value){const rowMaskLen=this._maskValue.split("").filter((s=>":"!==s)).length;return value&&(0==+(value[value.length-1]??-1)&&value.length<rowMaskLen||value.length<=rowMaskLen-2)?this._createValidationError(value):null}_getActualInputLength(){return this._maskService.actualValue.length||this._maskService.actualValue.length+this._maskService.prefix.length}_createValidationError(actualValue){return{mask:{requiredMask:this._maskValue,actualValue}}}_setMask(){this._maskExpressionArray.some((mask=>{if(mask.split("").some((char=>this._maskService.specialCharacters.includes(char)))&&this._inputValue&&!mask.includes("S")||mask.includes("{")){const test=this._maskService.removeMask(this._inputValue)?.length<=this._maskService.removeMask(mask)?.length;if(test)return this._maskValue=this.maskExpression=this._maskService.maskExpression=mask.includes("{")?this._maskService._repeatPatternSymbols(mask):mask,test;{const expression=this._maskExpressionArray[this._maskExpressionArray.length-1]??"";this._maskValue=this.maskExpression=this._maskService.maskExpression=expression.includes("{")?this._maskService._repeatPatternSymbols(expression):expression}}else{const check=this._maskService.removeMask(this._inputValue)?.split("").every(((character,index)=>{const indexMask=mask.charAt(index);return this._maskService._checkSymbolMask(character,indexMask)}));if(check)return this._maskValue=this.maskExpression=this._maskService.maskExpression=mask,check}}))}static#_=this.ɵfac=function NgxMaskDirective_Factory(t){return new(t||NgxMaskDirective)};static#_2=this.ɵdir=_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineDirective"]({type:NgxMaskDirective,selectors:[["input","mask",""],["textarea","mask",""]],hostBindings:function NgxMaskDirective_HostBindings(rf,ctx){1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("paste",(function NgxMaskDirective_paste_HostBindingHandler(){return ctx.onPaste()}))("focus",(function NgxMaskDirective_focus_HostBindingHandler($event){return ctx.onFocus($event)}))("ngModelChange",(function NgxMaskDirective_ngModelChange_HostBindingHandler($event){return ctx.onModelChange($event)}))("input",(function NgxMaskDirective_input_HostBindingHandler($event){return ctx.onInput($event)}))("compositionstart",(function NgxMaskDirective_compositionstart_HostBindingHandler($event){return ctx.onCompositionStart($event)}))("compositionend",(function NgxMaskDirective_compositionend_HostBindingHandler($event){return ctx.onCompositionEnd($event)}))("blur",(function NgxMaskDirective_blur_HostBindingHandler($event){return ctx.onBlur($event)}))("click",(function NgxMaskDirective_click_HostBindingHandler($event){return ctx.onClick($event)}))("keydown",(function NgxMaskDirective_keydown_HostBindingHandler($event){return ctx.onKeyDown($event)}))},inputs:{maskExpression:[_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵInputFlags"].None,"mask","maskExpression"],specialCharacters:"specialCharacters",patterns:"patterns",prefix:"prefix",suffix:"suffix",thousandSeparator:"thousandSeparator",decimalMarker:"decimalMarker",dropSpecialCharacters:"dropSpecialCharacters",hiddenInput:"hiddenInput",showMaskTyped:"showMaskTyped",placeHolderCharacter:"placeHolderCharacter",shownMaskExpression:"shownMaskExpression",showTemplate:"showTemplate",clearIfNotMatch:"clearIfNotMatch",validation:"validation",separatorLimit:"separatorLimit",allowNegativeNumbers:"allowNegativeNumbers",leadZeroDateTime:"leadZeroDateTime",leadZero:"leadZero",triggerOnMaskChange:"triggerOnMaskChange",apm:"apm",inputTransformFn:"inputTransformFn",outputTransformFn:"outputTransformFn",keepCharacterPositions:"keepCharacterPositions"},outputs:{maskFilled:"maskFilled"},exportAs:["mask","ngxMask"],standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵProvidersFeature"]([{provide:_angular_forms__WEBPACK_IMPORTED_MODULE_3__.Y6,useExisting:NgxMaskDirective,multi:!0},{provide:_angular_forms__WEBPACK_IMPORTED_MODULE_3__.WM,useExisting:NgxMaskDirective,multi:!0},NgxMaskService]),_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵNgOnChangesFeature"]]})}("undefined"==typeof ngDevMode||ngDevMode)&&_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](NgxMaskDirective,[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Directive,args:[{selector:"input[mask], textarea[mask]",standalone:!0,providers:[{provide:_angular_forms__WEBPACK_IMPORTED_MODULE_3__.Y6,useExisting:NgxMaskDirective,multi:!0},{provide:_angular_forms__WEBPACK_IMPORTED_MODULE_3__.WM,useExisting:NgxMaskDirective,multi:!0},NgxMaskService],exportAs:"mask,ngxMask"}]}],null,{maskExpression:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Input,args:["mask"]}],specialCharacters:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Input}],patterns:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Input}],prefix:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Input}],suffix:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Input}],thousandSeparator:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Input}],decimalMarker:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Input}],dropSpecialCharacters:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Input}],hiddenInput:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Input}],showMaskTyped:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Input}],placeHolderCharacter:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Input}],shownMaskExpression:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Input}],showTemplate:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Input}],clearIfNotMatch:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Input}],validation:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Input}],separatorLimit:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Input}],allowNegativeNumbers:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Input}],leadZeroDateTime:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Input}],leadZero:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Input}],triggerOnMaskChange:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Input}],apm:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Input}],inputTransformFn:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Input}],outputTransformFn:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Input}],keepCharacterPositions:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Input}],maskFilled:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Output}],onPaste:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.HostListener,args:["paste"]}],onFocus:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.HostListener,args:["focus",["$event"]]}],onModelChange:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.HostListener,args:["ngModelChange",["$event"]]}],onInput:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.HostListener,args:["input",["$event"]]}],onCompositionStart:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.HostListener,args:["compositionstart",["$event"]]}],onCompositionEnd:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.HostListener,args:["compositionend",["$event"]]}],onBlur:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.HostListener,args:["blur",["$event"]]}],onClick:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.HostListener,args:["click",["$event"]]}],onKeyDown:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.HostListener,args:["keydown",["$event"]]}]});class NgxMaskPipe{constructor(){this.defaultOptions=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.inject)(NGX_MASK_CONFIG),this._maskService=(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.inject)(NgxMaskService),this._maskExpressionArray=[],this.mask=""}transform(value,mask,{patterns,...config}={}){const currentConfig={maskExpression:mask,...this.defaultOptions,...config,patterns:{...this._maskService.patterns,...patterns}};if(Object.entries(currentConfig).forEach((([key,value])=>{this._maskService[key]=value})),mask.includes("||"))return mask.split("||").length>1?(this._maskExpressionArray=mask.split("||").sort(((a,b)=>a.length-b.length)),this._setMask(value),this._maskService.applyMask(`${value}`,this.mask)):(this._maskExpressionArray=[],this._maskService.applyMask(`${value}`,this.mask));if(mask.includes("{"))return this._maskService.applyMask(`${value}`,this._maskService._repeatPatternSymbols(mask));if(mask.startsWith("separator")){config.decimalMarker&&(this._maskService.decimalMarker=config.decimalMarker),config.thousandSeparator&&(this._maskService.thousandSeparator=config.thousandSeparator),config.leadZero&&(this._maskService.leadZero=config.leadZero),value=String(value);const localeDecimalMarker=this._maskService.currentLocaleDecimalMarker();Array.isArray(this._maskService.decimalMarker)||(value=this._maskService.decimalMarker!==localeDecimalMarker?value.replace(localeDecimalMarker,this._maskService.decimalMarker):value),this._maskService.leadZero&&value&&!1!==this._maskService.dropSpecialCharacters&&(value=this._maskService._checkPrecision(mask,value)),","===this._maskService.decimalMarker&&(value=value.toString().replace(".",",")),this._maskService.isNumberValue=!0}return null==value?this._maskService.applyMask("",mask):this._maskService.applyMask(`${value}`,mask)}_setMask(value){this._maskExpressionArray.length>0&&this._maskExpressionArray.some((mask=>{const test=this._maskService.removeMask(value)?.length<=this._maskService.removeMask(mask)?.length;if(value&&test)return this.mask=mask,test;{const expression=this._maskExpressionArray[this._maskExpressionArray.length-1]??"";this.mask=expression}}))}static#_=this.ɵfac=function NgxMaskPipe_Factory(t){return new(t||NgxMaskPipe)};static#_2=this.ɵpipe=_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefinePipe"]({name:"mask",type:NgxMaskPipe,pure:!0,standalone:!0})}("undefined"==typeof ngDevMode||ngDevMode)&&_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](NgxMaskPipe,[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Pipe,args:[{name:"mask",pure:!0,standalone:!0}]}],null,null)}}]);